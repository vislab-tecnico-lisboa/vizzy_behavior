<root main_tree_to_execute="BehaviorTree">
    <!-- ////////// -->
    <BehaviorTree ID="BehaviorTree">
        <ReactiveFallback>
            <ReactiveSequence>
                <Action topic="game_state" ID="GetInt16" number="state"/>
                <Fallback>
                    <BlackboardCheckInt value_A="{state}" value_B="0" return_on_mismatch="FAILURE">
                        <ForceSuccess>
                            <Sequence>
                                <Action pose_array="face_array" topic="faces" ID="GetPoseArray" name="GetFaceList"/>
                                <Action pose_array="{face_array}" ID="SelectPoseStamped" pose_stamped="face" position_in_list="0"/>
                                <Action frame_id="base_footprint" action_name="gaze" ID="GazeAtTarget" fixation_pose="{face}"/>
                            </Sequence>
                        </ForceSuccess>
                    </BlackboardCheckInt>
                    <BlackboardCheckInt value_A="{state}" value_B="1" return_on_mismatch="FAILURE">
                        <Action utterance="A correr" action_name="nuance_speech_tts" ID="Speak" language="pt_PT" voice="Joaquim"/>
                    </BlackboardCheckInt>
                    <BlackboardCheckInt value_A="{state}" value_B="2" return_on_mismatch="FAILURE">
                        <Action utterance="A preparar" action_name="nuance_speech_tts" ID="Speak" language="pt_PT" voice="Joaquim"/>
                    </BlackboardCheckInt>
                    <BlackboardCheckInt value_A="{state}" value_B="3" return_on_mismatch="FAILURE">
                        <Action utterance="A validar" action_name="nuance_speech_tts" ID="Speak" language="pt_PT" voice="Joaquim"/>
                    </BlackboardCheckInt>
                </Fallback>
            </ReactiveSequence>
            <SubTree ID="ErrorGameState"/>
        </ReactiveFallback>
    </BehaviorTree>
    <!-- ////////// -->
    <BehaviorTree ID="ErrorGameState">
        <SequenceStar>
            <Action utterance="NÃ£o sei o estado do jogo" action_name="nuance_speech_tts" ID="Speak" language="pt_PT" voice="Joaquim"/>
            <Action utterance="Chamem o assistente" action_name="nuance_speech_tts" ID="Speak" language="pt_PT" voice="Joaquim"/>
            <Action ID="WaitForXSeconds" seconds="60" result="SUCCESS"/>
        </SequenceStar>
    </BehaviorTree>
    <!-- ////////// -->
    <TreeNodesModel/>
    <!-- ////////// -->
</root>

